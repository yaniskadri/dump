import matplotlib.pyplot as plt

def draw_segments_matplotlib(segments, linewidth=0.5, invert_y=True):
    """
    segments: iterable de VectorSegment avec attributs
              x1, y1, x2, y2
    """

    plt.figure()

    xs_all = []
    ys_all = []

    for seg in segments:
        x1, y1 = seg.x1, seg.y1
        x2, y2 = seg.x2, seg.y2

        plt.plot([x1, x2], [y1, y2], linewidth=linewidth)

        xs_all.extend([x1, x2])
        ys_all.extend([y1, y2])

    ax = plt.gca()
    ax.set_aspect("equal", adjustable="box")

    if xs_all and ys_all:
        ax.set_xlim(min(xs_all), max(xs_all))
        ax.set_ylim(min(ys_all), max(ys_all))

    if invert_y:
        ax.invert_yaxis()  # cohérent avec coordonnées PDF

    plt.show()


import matplotlib.pyplot as plt

def draw_polygons(polygons, linewidth=0.8, invert_y=True):
    plt.figure()

    xs_all = []
    ys_all = []

    for poly in polygons:
        x, y = poly.exterior.xy  # contour extérieur

        plt.plot(x, y, linewidth=linewidth)

        xs_all.extend(x)
        ys_all.extend(y)

    ax = plt.gca()
    ax.set_aspect("equal", adjustable="box")

    if xs_all and ys_all:
        ax.set_xlim(min(xs_all), max(xs_all))
        ax.set_ylim(min(ys_all), max(ys_all))

    if invert_y:
        ax.invert_yaxis()

    plt.show()
